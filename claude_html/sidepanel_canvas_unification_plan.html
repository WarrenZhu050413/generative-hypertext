<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Side Panel & Canvas Unification Plan</title>
    <style>
        :root {
            --chinese-red: #8B0000;
            --chinese-gold: #FFD700;
            --paper-beige: #F5F5DC;
            --light-cream: #FFFEF0;
            --ink-black: #2C3E50;
            --level-1: #8B0000;
            --level-2: #B8860B;
            --level-3: #556B2F;
            --level-4: #708090;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--paper-beige) 0%, var(--light-cream) 100%);
            color: var(--ink-black);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.3;
            font-size: 14px;
            padding: 12px;
        }

        .container {
            max-width: 100%;
        }

        h1 {
            font-size: 28px;
            font-weight: 900;
            margin: 8px 0;
            padding: 8px 4px;
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 20px;
            font-weight: 700;
            margin: 12px 0 6px 0;
            padding: 6px;
            border-left: 4px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.05);
            color: var(--level-1);
        }

        h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 8px 0 4px 0;
            color: var(--level-2);
            padding-left: 8px;
            border-left: 3px solid var(--chinese-gold);
        }

        h4 {
            font-size: 14px;
            font-weight: 600;
            margin: 6px 0 3px 0;
            color: var(--level-3);
            padding-left: 12px;
        }

        .important-box {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), white);
            border: 2px solid var(--chinese-gold);
            padding: 12px;
            margin: 12px 0;
            border-radius: 4px;
        }

        .section {
            margin: 16px 0;
            padding: 8px;
            background: white;
            border: 1px solid rgba(139, 0, 0, 0.1);
            border-radius: 3px;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 12px 0;
        }

        .card {
            background: white;
            border: 1px solid rgba(139, 0, 0, 0.2);
            border-radius: 4px;
            padding: 10px;
            margin: 8px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .card.critical {
            border: 2px solid var(--chinese-red);
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.03), white);
        }

        code {
            background: rgba(245, 245, 220, 0.5);
            border: 1px solid rgba(139, 0, 0, 0.1);
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 13px;
            font-family: 'Courier New', monospace;
        }

        pre {
            background: linear-gradient(135deg, rgba(245, 245, 220, 0.4), white);
            border: 1px solid rgba(139, 0, 0, 0.15);
            padding: 10px;
            margin: 8px 0;
            overflow-x: auto;
            border-radius: 3px;
            font-size: 12px;
        }

        pre code {
            background: none;
            border: none;
            padding: 0;
        }

        ul, ol {
            margin: 8px 0;
            padding-left: 24px;
        }

        li {
            margin: 4px 0;
            line-height: 1.4;
        }

        li strong {
            color: var(--level-2);
        }

        .collapsible {
            margin: 8px 0;
        }

        .collapsible-header {
            cursor: pointer;
            padding: 8px 10px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.06), rgba(255, 215, 0, 0.04));
            border-left: 3px solid var(--chinese-gold);
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
            transition: all 0.2s ease;
            border-radius: 2px;
            font-weight: 600;
            color: var(--level-2);
        }

        .collapsible-header:hover {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(255, 215, 0, 0.08));
        }

        .collapsible-header .arrow {
            display: inline-block;
            transition: transform 0.3s ease;
            color: var(--chinese-red);
            font-size: 14px;
            margin-right: 8px;
        }

        .collapsible.open .arrow {
            transform: rotate(90deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 10px;
        }

        .collapsible.open .collapsible-content {
            max-height: 10000px;
            padding: 12px 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            font-size: 13px;
        }

        th, td {
            border: 1px solid rgba(139, 0, 0, 0.2);
            padding: 8px 10px;
            text-align: left;
        }

        th {
            background: rgba(139, 0, 0, 0.1);
            font-weight: 600;
            color: var(--level-1);
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            margin: 0 4px;
        }

        .badge.new {
            background: #4CAF50;
            color: white;
        }

        .badge.shared {
            background: var(--chinese-gold);
            color: var(--ink-black);
        }

        .badge.modified {
            background: #FF9800;
            color: white;
        }

        .divider {
            height: 2px;
            background: linear-gradient(90deg, var(--chinese-red), transparent);
            margin: 16px 0;
        }

        .step {
            counter-increment: step;
            position: relative;
            padding-left: 40px;
            margin: 12px 0;
        }

        .step::before {
            content: counter(step);
            position: absolute;
            left: 0;
            top: 0;
            background: var(--chinese-red);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .steps {
            counter-reset: step;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Side Panel & Canvas Unification Plan</h1>

        <div class="important-box">
            <h2 style="margin-top: 0;">üéØ Primary Goals</h2>
            <ol>
                <li><strong>Keyboard Shortcuts:</strong> Replace checkbox with mode indicator, clarify Cmd+Shift+E shortcuts</li>
                <li><strong>Side Panel Features:</strong> Add drag-and-drop image upload and file picker</li>
                <li><strong>Code Sharing:</strong> Extract and share filtering, card operations, and image handling between Canvas and Side Panel</li>
            </ol>
        </div>

        <div class="divider"></div>

        <h2>‚å®Ô∏è Part 1: Keyboard Shortcuts Clarification</h2>

        <div class="section">
            <h3>Current Understanding</h3>
            <p>You said "command shift e and shift-control e" - I need to clarify which you prefer:</p>

            <div class="two-column" style="margin-top: 12px;">
                <div class="card">
                    <h4>Option A (Recommended)</h4>
                    <table>
                        <tr>
                            <th>Action</th>
                            <th>Mac</th>
                            <th>Windows</th>
                        </tr>
                        <tr>
                            <td>Canvas Mode</td>
                            <td><code>Cmd+E</code></td>
                            <td><code>Ctrl+E</code></td>
                        </tr>
                        <tr>
                            <td>Stash Mode</td>
                            <td><code>Cmd+Shift+E</code></td>
                            <td><code>Ctrl+Shift+E</code></td>
                        </tr>
                    </table>
                    <p style="margin-top: 8px; font-size: 12px; color: #666;">‚ö†Ô∏è Note: Cmd+E may conflict with Chrome's search bar on Mac</p>
                </div>

                <div class="card">
                    <h4>Option B (Alternative)</h4>
                    <table>
                        <tr>
                            <th>Action</th>
                            <th>Mac</th>
                            <th>Windows</th>
                        </tr>
                        <tr>
                            <td>Canvas Mode</td>
                            <td><code>Cmd+Shift+E</code></td>
                            <td><code>Ctrl+Shift+E</code></td>
                        </tr>
                        <tr>
                            <td>Stash Mode</td>
                            <td><code>Ctrl+Shift+E</code></td>
                            <td><code>Alt+Shift+E</code></td>
                        </tr>
                    </table>
                    <p style="margin-top: 8px; font-size: 12px; color: #666;">Uses Control modifier on Mac (less common but available)</p>
                </div>
            </div>

            <h3 style="margin-top: 16px;">Mode Indicator Implementation</h3>
            <ul>
                <li><strong>Remove:</strong> Checkbox for "Stash immediately"</li>
                <li><strong>Add:</strong> Prominent banner at top showing current mode:
                    <ul>
                        <li>üé® <strong>CANVAS MODE</strong> - Cards appear on canvas (red/gold gradient)</li>
                        <li>üì• <strong>STASH MODE</strong> - Cards go directly to side panel (blue/indigo gradient)</li>
                    </ul>
                </li>
                <li><strong>Location:</strong> Fixed banner at top of screen, always visible</li>
            </ul>
        </div>

        <div class="divider"></div>

        <h2>üèóÔ∏è Part 2: Architecture Analysis</h2>

        <div class="section">
            <h3>Current Code Duplication</h3>

            <table>
                <thead>
                    <tr>
                        <th>Functionality</th>
                        <th>Canvas Location</th>
                        <th>Side Panel Location</th>
                        <th>Duplication Level</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Card Filtering</td>
                        <td><code>useCanvasState.ts:336-382</code></td>
                        <td><code>SidePanel.tsx (inline)</code></td>
                        <td style="background: #FFCDD2;">üî¥ High (100%)</td>
                    </tr>
                    <tr>
                        <td>Filter UI</td>
                        <td><code>Toolbar.tsx</code></td>
                        <td><code>SidePanel.tsx (inline)</code></td>
                        <td style="background: #FFCDD2;">üî¥ High (90%)</td>
                    </tr>
                    <tr>
                        <td>Card Operations</td>
                        <td><code>CardNode.tsx, Canvas.tsx</code></td>
                        <td><code>stashService.ts</code></td>
                        <td style="background: #FFF9C4;">üü° Medium (60%)</td>
                    </tr>
                    <tr>
                        <td>Image Upload</td>
                        <td><code>imageUpload.ts, Canvas.tsx</code></td>
                        <td>‚ùå Not implemented</td>
                        <td style="background: #C8E6C9;">üü¢ None (0%)</td>
                    </tr>
                    <tr>
                        <td>Card Display</td>
                        <td><code>CardNode.tsx</code></td>
                        <td><code>SidePanel.tsx (inline)</code></td>
                        <td style="background: #FFF9C4;">üü° Medium (50%)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="divider"></div>

        <h2>üì¶ Part 3: Proposed Shared Architecture</h2>

        <div class="section">
            <h3>New Directory Structure</h3>
            <pre><code>src/
  shared/                           <span class="badge new">NEW</span>
    components/                     <span class="badge new">NEW</span>
      FilterBar/
        FilterBar.tsx               <span class="badge new">NEW</span> - Extracted from Toolbar
        FilterBar.styles.ts         <span class="badge new">NEW</span>
      CardList/
        CardList.tsx                <span class="badge new">NEW</span> - Unified card display
        CardListItem.tsx            <span class="badge new">NEW</span> - Individual card
        CardList.styles.ts          <span class="badge new">NEW</span>
      ImageUpload/
        ImageUploadZone.tsx         <span class="badge new">NEW</span> - Drag & drop zone
        FilePickerButton.tsx        <span class="badge new">NEW</span> - File input button
        ImageUpload.styles.ts       <span class="badge new">NEW</span>

    hooks/                          <span class="badge new">NEW</span>
      useCards.ts                   <span class="badge new">NEW</span> - Load/save cards from storage
      useFilters.ts                 <span class="badge new">NEW</span> - Filtering logic
      useImageUpload.ts             <span class="badge new">NEW</span> - Image handling
      useCardOperations.ts          <span class="badge new">NEW</span> - CRUD operations

    services/                       <span class="badge new">NEW</span>
      cardService.ts                <span class="badge new">NEW</span> - Card CRUD (extracted from storage.ts)
      filterService.ts              <span class="badge new">NEW</span> - Filtering utilities
      imageService.ts               <span class="badge shared">SHARED</span> - Uses existing imageUpload.ts

  canvas/
    Canvas.tsx                      <span class="badge modified">MODIFIED</span> - Use shared components
    CardNode.tsx                    <span class="badge modified">MODIFIED</span> - React Flow specific only
    useCanvasState.ts               <span class="badge modified">MODIFIED</span> - Delegate to shared hooks
    Toolbar.tsx                     <span class="badge modified">MODIFIED</span> - Use shared FilterBar

  sidepanel/
    SidePanel.tsx                   <span class="badge modified">MODIFIED</span> - Use shared components
    stashService.ts                 (keep as-is)

  utils/
    storage.ts                      <span class="badge modified">MODIFIED</span> - Keep basic save/load
    imageUpload.ts                  <span class="badge shared">SHARED</span> - Used by imageService</code></pre>
        </div>

        <div class="divider"></div>

        <div class="collapsible">
            <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">
                <span><span class="arrow">‚ñ∂</span>Detailed Component Specifications</span>
            </div>
            <div class="collapsible-content">
                <h3>1. FilterBar Component</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Unified filtering UI for both Canvas and Side Panel</p>

                    <h4>Props Interface</h4>
                    <pre><code>interface FilterBarProps {
  filters: FilterState;
  onFiltersChange: (filters: FilterState) => void;
  availableDomains: string[];
  availableTags: string[];
  compact?: boolean; // true for side panel, false for canvas
}</code></pre>

                    <h4>Features</h4>
                    <ul>
                        <li>Search input</li>
                        <li>Starred filter toggle</li>
                        <li>Domain multi-select</li>
                        <li>Tag multi-select</li>
                        <li>Date range selector</li>
                        <li>Responsive layout (compact mode for side panel)</li>
                    </ul>
                </div>

                <h3>2. CardList Component</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Display list of cards with consistent styling and operations</p>

                    <h4>Props Interface</h4>
                    <pre><code>interface CardListProps {
  cards: Card[];
  mode: 'canvas' | 'stash'; // Different operations available
  onCardClick?: (cardId: string) => void;
  onCardRestore?: (cardId: string) => void;
  onCardDelete?: (cardId: string) => void;
  onCardStash?: (cardId: string) => void;
  expandable?: boolean; // Enable expand/collapse
}</code></pre>

                    <h4>Features</h4>
                    <ul>
                        <li>Consistent card rendering</li>
                        <li>Expandable content (for side panel)</li>
                        <li>Context menu for operations</li>
                        <li>Drag handle for reordering</li>
                        <li>Loading states</li>
                    </ul>
                </div>

                <h3>3. ImageUpload Components</h3>
                <div class="card">
                    <h4>ImageUploadZone</h4>
                    <pre><code>interface ImageUploadZoneProps {
  onImageUpload: (file: File) => Promise&lt;void&gt;;
  children?: React.ReactNode; // Render content inside drop zone
  overlay?: boolean; // Show overlay on drag-over
}</code></pre>

                    <h4>FilePickerButton</h4>
                    <pre><code>interface FilePickerButtonProps {
  onFilesSelected: (files: File[]) => Promise&lt;void&gt;;
  multiple?: boolean;
  accept?: string; // Default: 'image/*'
  label?: string;
}</code></pre>

                    <h4>Usage Pattern</h4>
                    <pre><code>// Wrap entire side panel in ImageUploadZone
&lt;ImageUploadZone onImageUpload={handleImageUpload} overlay&gt;
  &lt;FilterBar .../&gt;
  &lt;FilePickerButton .../&gt;
  &lt;CardList .../&gt;
&lt;/ImageUploadZone&gt;</code></pre>
                </div>
            </div>
        </div>

        <div class="collapsible">
            <div class="collapsible-header" onclick="this.parentElement.classList.toggle('open')">
                <span><span class="arrow">‚ñ∂</span>Detailed Hook Specifications</span>
            </div>
            <div class="collapsible-content">
                <h3>1. useCards Hook</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Centralized card loading and management</p>

                    <h4>API</h4>
                    <pre><code>interface UseCardsReturn {
  cards: Card[];
  isLoading: boolean;
  error: string | null;
  refreshCards: () => Promise&lt;void&gt;;
  stats: StorageStats | null;
}

function useCards(
  includeStashed: boolean = false
): UseCardsReturn</code></pre>

                    <h4>Implementation</h4>
                    <ul>
                        <li>Loads cards from chrome.storage.local on mount</li>
                        <li>Filters stashed cards based on <code>includeStashed</code></li>
                        <li>Listens for storage changes and auto-refreshes</li>
                        <li>Provides storage stats</li>
                    </ul>
                </div>

                <h3>2. useFilters Hook</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Unified filtering logic extracted from useCanvasState</p>

                    <h4>API</h4>
                    <pre><code>interface UseFiltersReturn {
  filters: FilterState;
  setFilters: (filters: FilterState) => void;
  filteredCards: Card[];
  availableDomains: string[];
  availableTags: string[];
}

function useFilters(
  cards: Card[],
  persistKey?: string // Optional key for session storage
): UseFiltersReturn</code></pre>

                    <h4>Features</h4>
                    <ul>
                        <li>Search by title, domain, content, tags</li>
                        <li>Filter by starred, domains, tags, date range</li>
                        <li>Extract unique domains and tags</li>
                        <li>Optional persistence to session storage</li>
                    </ul>
                </div>

                <h3>3. useImageUpload Hook</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Handle image uploads with validation and processing</p>

                    <h4>API</h4>
                    <pre><code>interface UseImageUploadReturn {
  handleImageUpload: (file: File) => Promise&lt;Card&gt;;
  isUploading: boolean;
  error: string | null;
}

function useImageUpload(
  onSuccess?: (card: Card) => void,
  defaultStashed?: boolean
): UseImageUploadReturn</code></pre>

                    <h4>Features</h4>
                    <ul>
                        <li>File validation (type, size)</li>
                        <li>Image compression</li>
                        <li>Card creation with imageData</li>
                        <li>Auto-save to storage</li>
                        <li>Support stashed mode</li>
                    </ul>
                </div>

                <h3>4. useCardOperations Hook</h3>
                <div class="card">
                    <h4>Purpose</h4>
                    <p>Unified CRUD operations on cards</p>

                    <h4>API</h4>
                    <pre><code>interface UseCardOperationsReturn {
  stashCard: (cardId: string) => Promise&lt;void&gt;;
  restoreCard: (cardId: string) => Promise&lt;void&gt;;
  deleteCard: (cardId: string) => Promise&lt;void&gt;;
  updateCard: (cardId: string, updates: Partial&lt;Card&gt;) => Promise&lt;void&gt;;
  duplicateCard: (cardId: string) => Promise&lt;Card&gt;;
}

function useCardOperations(
  onUpdate?: () => void
): UseCardOperationsReturn</code></pre>

                    <h4>Features</h4>
                    <ul>
                        <li>Broadcasts runtime messages for cross-context sync</li>
                        <li>Dispatches local events for same-context updates</li>
                        <li>Error handling and validation</li>
                        <li>Optimistic updates</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üöÄ Part 4: Implementation Steps</h2>

        <div class="section steps">
            <div class="step">
                <h4>Update Keyboard Shortcuts & Mode Indicator</h4>
                <ul>
                    <li>Clarify keyboard shortcut preference with user</li>
                    <li>Update manifest.json with chosen shortcuts</li>
                    <li>Remove checkbox from ElementSelector</li>
                    <li>Add prominent mode indicator banner</li>
                    <li>Style indicator with distinct colors (canvas=red/gold, stash=blue/indigo)</li>
                </ul>
            </div>

            <div class="step">
                <h4>Create Shared Services</h4>
                <ul>
                    <li>Extract card CRUD to <code>src/shared/services/cardService.ts</code></li>
                    <li>Extract filtering to <code>src/shared/services/filterService.ts</code></li>
                    <li>Create <code>src/shared/services/imageService.ts</code> (wraps imageUpload.ts)</li>
                </ul>
            </div>

            <div class="step">
                <h4>Create Shared Hooks</h4>
                <ul>
                    <li>Implement <code>useCards</code> - extract from useCanvasState</li>
                    <li>Implement <code>useFilters</code> - extract filtering logic</li>
                    <li>Implement <code>useImageUpload</code> - wrap imageService</li>
                    <li>Implement <code>useCardOperations</code> - unified operations</li>
                </ul>
            </div>

            <div class="step">
                <h4>Create Shared Components</h4>
                <ul>
                    <li>Extract FilterBar from Toolbar</li>
                    <li>Create CardList and CardListItem</li>
                    <li>Create ImageUploadZone and FilePickerButton</li>
                    <li>Test components in isolation</li>
                </ul>
            </div>

            <div class="step">
                <h4>Refactor Canvas</h4>
                <ul>
                    <li>Update Canvas.tsx to use shared hooks and components</li>
                    <li>Keep CardNode.tsx for React Flow specific rendering</li>
                    <li>Simplify useCanvasState to only handle React Flow logic</li>
                    <li>Update Toolbar to use shared FilterBar</li>
                </ul>
            </div>

            <div class="step">
                <h4>Refactor Side Panel</h4>
                <ul>
                    <li>Update SidePanel.tsx to use shared hooks</li>
                    <li>Use shared FilterBar component</li>
                    <li>Use shared CardList for display</li>
                    <li>Add ImageUploadZone wrapper</li>
                    <li>Add FilePickerButton for manual upload</li>
                </ul>
            </div>

            <div class="step">
                <h4>Test & Polish</h4>
                <ul>
                    <li>Test image upload in both canvas and side panel</li>
                    <li>Test filtering in both contexts</li>
                    <li>Test card operations (stash/restore/delete)</li>
                    <li>Test cross-context synchronization</li>
                    <li>Test keyboard shortcuts</li>
                    <li>Polish UI consistency</li>
                </ul>
            </div>

            <div class="step">
                <h4>Documentation</h4>
                <ul>
                    <li>Update CLAUDE.md with new architecture</li>
                    <li>Document shared components and hooks</li>
                    <li>Add usage examples</li>
                    <li>Update keyboard shortcut documentation</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üìä Part 5: Benefits Analysis</h2>

        <div class="two-column">
            <div class="card">
                <h3>Code Reduction</h3>
                <ul>
                    <li><strong>Filtering:</strong> ~100 lines ‚Üí reused (save ~100 lines)</li>
                    <li><strong>Filter UI:</strong> ~150 lines ‚Üí reused (save ~150 lines)</li>
                    <li><strong>Card operations:</strong> ~80 lines ‚Üí reused (save ~80 lines)</li>
                    <li><strong>Image upload:</strong> ~120 lines ‚Üí shared (save ~120 lines)</li>
                </ul>
                <p style="margin-top: 12px; font-weight: bold; color: var(--chinese-red);">Total: ~450 lines of duplicate code eliminated</p>
            </div>

            <div class="card">
                <h3>Maintainability</h3>
                <ul>
                    <li>Single source of truth for filtering logic</li>
                    <li>Consistent card operations across contexts</li>
                    <li>Easier to add new features (add once, works everywhere)</li>
                    <li>Reduced risk of bugs from divergent implementations</li>
                </ul>
            </div>
        </div>

        <div class="card critical" style="margin-top: 16px;">
            <h3>‚ö†Ô∏è Critical Considerations</h3>
            <ol>
                <li><strong>React Flow Dependency:</strong> Canvas still needs CardNode for React Flow rendering - don't try to share this</li>
                <li><strong>Context Isolation:</strong> Keep runtime messaging for cross-context sync (already implemented)</li>
                <li><strong>Stashed Filter:</strong> Canvas filters out stashed cards, Side Panel shows only stashed - use <code>includeStashed</code> parameter</li>
                <li><strong>Image Upload Context:</strong> Canvas creates cards at specific positions, Side Panel creates at default position</li>
                <li><strong>Performance:</strong> Side panel doesn't need React Flow overhead - keep separate card display components</li>
            </ol>
        </div>

        <div class="divider"></div>

        <h2>‚úÖ Next Steps</h2>

        <div class="important-box">
            <h3>Immediate Actions Required</h3>
            <ol style="font-size: 15px; line-height: 1.6;">
                <li><strong>Clarify Keyboard Shortcuts:</strong> Confirm which option (A or B) you prefer</li>
                <li><strong>Approve Architecture:</strong> Review proposed structure and confirm approach</li>
                <li><strong>Begin Implementation:</strong> Start with Step 1 (keyboard shortcuts) or full refactoring?</li>
            </ol>
        </div>

        <script>
            // Make all collapsibles interactive
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', function() {
                    this.parentElement.classList.toggle('open');
                });
            });
        </script>
    </div>
</body>
</html>