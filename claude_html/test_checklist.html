<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Checklist - Complete Refactor</title>
    <style>
        :root {
            --chinese-red: #8B0000;
            --chinese-gold: #FFD700;
            --paper-beige: #F5F5DC;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--paper-beige) 0%, #FFFEF0 100%);
            color: #2C3E50;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            padding: 24px;
        }

        h1 {
            font-size: 32px;
            font-weight: 900;
            margin-bottom: 24px;
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 24px;
            font-weight: 700;
            margin: 32px 0 16px 0;
            padding: 8px;
            border-left: 4px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.05);
            color: var(--chinese-red);
        }

        h3 {
            font-size: 18px;
            font-weight: 600;
            margin: 24px 0 12px 0;
            color: #B8860B;
        }

        .checklist {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 12px 0;
            padding: 12px;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .checklist-item:hover {
            background: rgba(255, 215, 0, 0.05);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--chinese-gold);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checkbox.checked {
            background: var(--chinese-gold);
            color: white;
        }

        .item-content {
            flex: 1;
        }

        .item-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 6px;
            color: #2C3E50;
        }

        .item-steps {
            font-size: 14px;
            color: #666;
            margin-left: 16px;
        }

        .item-steps li {
            margin: 4px 0;
        }

        .expected {
            background: rgba(76, 175, 80, 0.1);
            border-left: 3px solid #4CAF50;
            padding: 8px 12px;
            margin-top: 8px;
            border-radius: 4px;
            font-size: 14px;
        }

        .expected strong {
            color: #4CAF50;
        }

        .warning {
            background: rgba(255, 152, 0, 0.1);
            border-left: 3px solid #FF9800;
            padding: 8px 12px;
            margin: 16px 0;
            border-radius: 4px;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .badge.new {
            background: #4CAF50;
            color: white;
        }

        .badge.critical {
            background: var(--chinese-red);
            color: white;
        }

        .progress {
            margin: 24px 0;
            padding: 16px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), white);
            border: 2px solid var(--chinese-gold);
            border-radius: 8px;
        }

        .progress-bar {
            height: 32px;
            background: #e0e0e0;
            border-radius: 16px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--chinese-gold), #FFD700);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #2C3E50;
            font-weight: 600;
        }

        .shortcut {
            background: #2C3E50;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 13px;
        }

        button {
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 8px 4px;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(139, 0, 0, 0.3);
        }

        .section {
            margin: 32px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Checklist - Complete Refactor</h1>

    <div class="warning">
        <strong>‚ö†Ô∏è Before Testing:</strong> Make sure you've reloaded the extension in <code>chrome://extensions</code> and refreshed any open Canvas pages.
    </div>

    <div class="progress">
        <strong>Test Progress</strong>
        <div class="progress-bar">
            <div class="progress-fill" id="progress">0%</div>
        </div>
        <div style="margin-top: 8px; font-size: 14px; color: #666;">
            <span id="completed">0</span> of <span id="total">0</span> tests completed
        </div>
    </div>

    <div class="section">
        <h2>1Ô∏è‚É£ Keyboard Shortcuts</h2>
        <div class="checklist">
            <div class="checklist-item" data-test="kb-canvas">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge critical">CRITICAL</span>
                        Canvas Mode - <span class="shortcut">Cmd+E</span> (Mac) / <span class="shortcut">Ctrl+E</span> (Windows)
                    </div>
                    <ol class="item-steps">
                        <li>Navigate to any website (e.g., example.com)</li>
                        <li>Press <strong>Cmd+E</strong> (Mac) or <strong>Ctrl+E</strong> (Windows)</li>
                        <li>Element selector should activate</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Top of screen shows banner "üé® CANVAS MODE" with red/gold gradient and text "Cards will appear on Canvas"
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="kb-stash">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge critical">CRITICAL</span>
                        Stash Mode - <span class="shortcut">Cmd+Shift+E</span> (Mac) / <span class="shortcut">Ctrl+Shift+E</span> (Windows)
                    </div>
                    <ol class="item-steps">
                        <li>Press Escape to close any active selector</li>
                        <li>Press <strong>Cmd+Shift+E</strong> (Mac) or <strong>Ctrl+Shift+E</strong> (Windows)</li>
                        <li>Element selector should activate</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Top of screen shows banner "üì• STASH MODE" with blue gradient and text "Cards will be saved to Side Panel"
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="kb-no-checkbox">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        No Checkbox Visible
                    </div>
                    <ol class="item-steps">
                        <li>With selector active (either mode)</li>
                        <li>Check bottom of screen for instructions</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> NO checkbox for "Stash immediately" should be visible. Only the mode banner at top and instructions at bottom.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>2Ô∏è‚É£ Capture & Stash Workflow</h2>
        <div class="checklist">
            <div class="checklist-item" data-test="capture-canvas">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Capture to Canvas</div>
                    <ol class="item-steps">
                        <li>Press <strong>Cmd+E</strong> to activate Canvas mode</li>
                        <li>Click on any element (e.g., a heading or paragraph)</li>
                        <li>Wait for capture to complete</li>
                        <li>Open Canvas page (click extension icon or navigate to canvas)</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Card appears on Canvas (NOT in Side Panel stash)
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="capture-stash">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Capture to Stash</div>
                    <ol class="item-steps">
                        <li>Press <strong>Cmd+Shift+E</strong> to activate Stash mode</li>
                        <li>Click on any element</li>
                        <li>Wait for capture to complete</li>
                        <li>Open Side Panel (click "üì¶ Stashed Cards" button in Canvas toolbar)</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Card appears in Side Panel (NOT on Canvas)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>3Ô∏è‚É£ Side Panel Features</h2>
        <div class="checklist">
            <div class="checklist-item" data-test="sidepanel-open">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Open Side Panel</div>
                    <ol class="item-steps">
                        <li>Open Canvas page</li>
                        <li>Look for sidebar button in toolbar (üì¶ icon)</li>
                        <li>Click the button</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Chrome Side Panel opens on the right side showing "üì¶ Stashed Cards" header
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sidepanel-upload-button">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        Upload Button Present
                    </div>
                    <ol class="item-steps">
                        <li>With Side Panel open</li>
                        <li>Look below the header</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Green button "üìÅ Upload Images" is visible in a light green section
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sidepanel-file-upload">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        File Upload Works
                    </div>
                    <ol class="item-steps">
                        <li>Click "üìÅ Upload Images" button</li>
                        <li>Select an image file from your computer</li>
                        <li>Wait for upload to complete</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Image appears as a new card in the stash list with stashed=true
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sidepanel-drag-drop">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        Drag & Drop Upload Works
                    </div>
                    <ol class="item-steps">
                        <li>Find an image file on your computer</li>
                        <li>Drag it over the Side Panel window</li>
                        <li>Look for drag overlay</li>
                        <li>Drop the image</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Dark overlay appears with "Drop image to upload" text, then image appears as stashed card
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sidepanel-restore">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Restore Card from Stash</div>
                    <ol class="item-steps">
                        <li>Find a stashed card in Side Panel</li>
                        <li>Click "‚Ü©Ô∏è Restore" button</li>
                        <li>Open Canvas page</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Card disappears from Side Panel and appears on Canvas
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>4Ô∏è‚É£ Cross-Context Synchronization</h2>
        <div class="checklist">
            <div class="checklist-item" data-test="sync-stash-canvas">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        Stash Updates Canvas Instantly
                    </div>
                    <ol class="item-steps">
                        <li>Open Canvas page and Side Panel side-by-side</li>
                        <li>Stash a card from Canvas (click stash button on a card)</li>
                        <li>Look at Side Panel (don't refresh)</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Card appears in Side Panel immediately without reloading
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sync-restore-canvas">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        Restore Updates Canvas Instantly
                    </div>
                    <ol class="item-steps">
                        <li>With Canvas and Side Panel open side-by-side</li>
                        <li>Restore a card from Side Panel</li>
                        <li>Look at Canvas (don't refresh)</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Card appears on Canvas immediately without reloading
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="sync-upload-appears">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">
                        <span class="badge new">NEW</span>
                        Upload Appears Instantly
                    </div>
                    <ol class="item-steps">
                        <li>With Side Panel open</li>
                        <li>Upload an image via button or drag-and-drop</li>
                        <li>Watch the card list</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Uploaded image appears in stash list immediately after upload
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>5Ô∏è‚É£ Visual Polish</h2>
        <div class="checklist">
            <div class="checklist-item" data-test="visual-mode-banner">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Mode Banner Styling</div>
                    <ol class="item-steps">
                        <li>Activate Canvas mode (Cmd+E)</li>
                        <li>Check banner appearance</li>
                        <li>Activate Stash mode (Cmd+Shift+E)</li>
                        <li>Check banner appearance</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong>
                        <ul>
                            <li>Canvas mode: Red/gold gradient, clear white text</li>
                            <li>Stash mode: Blue gradient, clear white text</li>
                            <li>Both: Prominent, centered, slide-down animation</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="checklist-item" data-test="visual-upload-section">
                <div class="checkbox" onclick="toggleCheck(this)"></div>
                <div class="item-content">
                    <div class="item-title">Upload Section Styling</div>
                    <ol class="item-steps">
                        <li>Open Side Panel</li>
                        <li>Check upload button section</li>
                    </ol>
                    <div class="expected">
                        <strong>‚úì Expected:</strong> Light green background section with green "üìÅ Upload Images" button, visually distinct from rest of panel
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>‚úÖ Test Summary</h2>
        <div id="summary" style="padding: 20px; background: white; border-radius: 8px; margin-top: 16px;">
            <p style="font-size: 16px; margin-bottom: 12px;">Complete all tests above to verify the refactor.</p>
            <button onclick="resetAll()">Reset All Tests</button>
            <button onclick="window.print()">Print Checklist</button>
        </div>
    </div>

    <script>
        function toggleCheck(element) {
            element.classList.toggle('checked');
            if (element.classList.contains('checked')) {
                element.textContent = '‚úì';
            } else {
                element.textContent = '';
            }
            updateProgress();
        }

        function updateProgress() {
            const checkboxes = document.querySelectorAll('.checkbox');
            const checked = document.querySelectorAll('.checkbox.checked');
            const total = checkboxes.length;
            const completed = checked.length;
            const percentage = Math.round((completed / total) * 100);

            document.getElementById('progress').style.width = percentage + '%';
            document.getElementById('progress').textContent = percentage + '%';
            document.getElementById('completed').textContent = completed;
            document.getElementById('total').textContent = total;
        }

        function resetAll() {
            document.querySelectorAll('.checkbox.checked').forEach(el => {
                el.classList.remove('checked');
                el.textContent = '';
            });
            updateProgress();
        }

        // Initialize
        updateProgress();
    </script>
</body>
</html>
