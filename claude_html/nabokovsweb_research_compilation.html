<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NabokovsWeb Research & Development Compilation</title>
    <style>
        :root {
            --chinese-red: #8B0000;
            --chinese-gold: #FFD700;
            --paper-beige: #F5F5DC;
            --light-cream: #FFFEF0;
            --ink-black: #2C2C2C;
            --level-1: #8B0000;
            --level-2: #CD5C5C;
            --level-3: #666;
            --level-4: #999;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--paper-beige) 0%, var(--light-cream) 100%);
            color: var(--ink-black);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro', 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.3;
            font-size: 14px;
            width: 100vw;
            max-width: 100%;
            padding: 0;
            margin: 0;
        }

        .container {
            width: 100%;
            padding: 8px;
            margin: 0;
        }

        h1 {
            font-size: 28px;
            font-weight: 900;
            margin: 8px 0;
            padding: 12px;
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            letter-spacing: -0.5px;
        }

        h2 {
            font-size: 20px;
            font-weight: 700;
            margin: 12px 0 6px 0;
            padding: 6px;
            border-left: 5px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.05);
            color: var(--level-1);
        }

        h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 6px 0 3px 12px;
            color: var(--level-2);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        h4 {
            font-size: 14px;
            font-weight: 500;
            margin: 4px 0 2px 16px;
            color: var(--level-3);
        }

        .important-always-visible {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), white);
            border: 3px solid var(--chinese-gold);
            padding: 12px;
            margin: 12px 0;
            border-radius: 4px;
        }

        .important-always-visible h2 {
            color: var(--chinese-red);
            margin-top: 0;
        }

        .collapsible {
            margin: 6px 0;
            width: 100%;
        }

        .collapsible-header {
            cursor: pointer;
            padding: 8px 12px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.05), rgba(255, 215, 0, 0.02));
            border-left: 3px solid var(--chinese-gold);
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
            transition: all 0.2s ease;
        }

        .collapsible-header:hover {
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(255, 215, 0, 0.05));
        }

        .collapsible-header .arrow {
            display: inline-block;
            transition: transform 0.3s ease;
            color: var(--chinese-red);
            font-size: 12px;
            margin-right: 8px;
        }

        .collapsible.open .arrow {
            transform: rotate(90deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 12px;
            margin-left: 16px;
        }

        .collapsible.open .collapsible-content {
            max-height: 10000px;
            padding: 12px;
        }

        .collapsible.critical .collapsible-header {
            border-left: 5px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.08);
            font-weight: 700;
        }

        .collapsible.high .collapsible-header {
            border-left: 4px solid var(--chinese-gold);
            background: rgba(255, 215, 0, 0.08);
            font-weight: 600;
        }

        .collapsible.medium .collapsible-header {
            border-left: 3px solid #999;
            background: rgba(0, 0, 0, 0.02);
            font-weight: 500;
        }

        .dense-list {
            list-style: none;
            padding: 0;
            margin-left: 12px;
        }

        .dense-list li {
            padding: 3px 0 3px 16px;
            border-left: 2px solid transparent;
            position: relative;
            line-height: 1.4;
        }

        .dense-list li:before {
            content: "‚ñ∏";
            position: absolute;
            left: 0;
            color: var(--chinese-red);
            font-size: 11px;
        }

        .dense-list li strong {
            color: var(--level-2);
            font-weight: 600;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 8px 0;
            font-size: 13px;
        }

        th, td {
            border: 1px solid rgba(139, 0, 0, 0.2);
            padding: 4px 8px;
            text-align: left;
            line-height: 1.2;
        }

        th {
            background: rgba(139, 0, 0, 0.1);
            font-weight: 600;
        }

        code {
            background: linear-gradient(135deg, rgba(245, 245, 220, 0.3), rgba(255, 255, 255, 0.5));
            border: 1px solid rgba(139, 0, 0, 0.1);
            padding: 2px 6px;
            font-size: 12px;
            border-radius: 2px;
            font-family: 'Monaco', 'Menlo', monospace;
        }

        .card {
            background: white;
            border: 1px solid rgba(139, 0, 0, 0.2);
            border-radius: 3px;
            padding: 8px;
            margin: 6px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .card.priority {
            border: 2px solid var(--chinese-gold);
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), white);
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 12px 0;
        }

        .divider {
            height: 2px;
            background: linear-gradient(90deg, var(--chinese-red), transparent);
            margin: 16px 0;
        }

        .stat {
            display: inline-block;
            background: var(--chinese-red);
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 600;
            margin: 2px 4px;
        }

        .badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 11px;
            font-weight: 600;
            margin: 0 4px;
        }

        .badge.critical { background: #ff4444; color: white; }
        .badge.high { background: #ffaa00; color: white; }
        .badge.medium { background: #4CAF50; color: white; }
        .badge.low { background: #999; color: white; }
        .badge.completed { background: var(--chinese-gold); color: #8B0000; }

        .indent-1 { margin-left: 16px; }
        .indent-2 { margin-left: 32px; }
        .indent-3 { margin-left: 48px; }

        .expand-all-btn {
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            color: white;
            border: 1px solid var(--chinese-gold);
            padding: 8px 16px;
            margin: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .expand-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 0, 0, 0.3);
        }

        .summary-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 16px 0;
            padding: 12px;
            background: white;
            border-radius: 4px;
            border: 2px solid var(--chinese-gold);
        }

        .summary-stats .stat-item {
            text-align: center;
            padding: 8px 16px;
        }

        .summary-stats .stat-number {
            font-size: 32px;
            font-weight: 900;
            color: var(--chinese-red);
        }

        .summary-stats .stat-label {
            font-size: 12px;
            color: var(--level-3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèÆ NabokovsWeb: Research & Development Compilation üèÆ</h1>

        <div class="summary-stats">
            <div class="stat-item">
                <div class="stat-number">143</div>
                <div class="stat-label">Total Features</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">76</div>
                <div class="stat-label">Implemented (53%)</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">67</div>
                <div class="stat-label">Planned (47%)</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">51</div>
                <div class="stat-label">Research Rounds</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">400+</div>
                <div class="stat-label">APIs Researched</div>
            </div>
        </div>

        <button class="expand-all-btn" onclick="toggleAll()">Expand/Collapse All</button>

        <div class="important-always-visible">
            <h2>üéØ Critical Takeaways</h2>
            <ul class="dense-list">
                <li><strong>Research Validation:</strong> Spatial canvas approach independently validated by 3+ research groups (Orca UCSD, Sensecape UIST'23, Nabokov UIST'24)</li>
                <li><strong>Unique Positioning:</strong> Only tool combining element-level capture + spatial canvas + generative AI + web integration</li>
                <li><strong>Killer Features to Build:</strong>
                    <ul class="dense-list indent-1">
                        <li>Client-side semantic search (F8.4) - fully offline, privacy-preserving</li>
                        <li>Real-time collaboration (F40.11) - WebSocket + CRDT</li>
                        <li>Multilevel abstraction (F0.2) - React Flow parent nodes</li>
                    </ul>
                </li>
                <li><strong>Critical Gaps:</strong>
                    <ul class="dense-list indent-1">
                        <li>‚ùå No backlinks panel (universal in PKM tools)</li>
                        <li>‚ùå No multilevel abstraction (doesn't scale to 100+ cards)</li>
                        <li>‚ùå No version history (user confidence issue)</li>
                        <li>‚ùå No GDPR compliance (legal blocker for EU)</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="divider"></div>

        <h2>üìö Research Insights (from memory.md)</h2>

        <div class="collapsible critical">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Major Research Findings - Spatial Hypertext Renaissance</strong> <span class="badge critical">CRITICAL</span></div>
            </div>
            <div class="collapsible-content">
                <h3>Convergent Evolution (2023-2025)</h3>
                <p>Multiple research groups independently converging on spatial canvases for LLM sensemaking:</p>

                <div class="card priority">
                    <h4>üî¨ Key Papers</h4>
                    <ul class="dense-list">
                        <li><strong>Orca</strong> (UCSD, arXiv 2505.22831): Malleable webpages on canvas, AI-facilitated orchestration</li>
                        <li><strong>Sensecape</strong> (UIST '23): Multilevel exploration with hierarchy view + canvas view</li>
                        <li><strong>Nabokov</strong> (UIST '24): Element-level capture + generative AI + spatial canvas</li>
                    </ul>
                </div>

                <p class="indent-1"><strong>Insight:</strong> Spatial arrangement validates as solution to LLM linearity problem across 3+ independent research teams</p>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Epistemic Agency in AI Tools</strong> <span class="badge high">HIGH</span></div>
            </div>
            <div class="collapsible-content">
                <h4>EASS Scale (Nieminen & Kotenen 2024)</h4>
                <p>5-factor epistemic agency measurement system:</p>
                <ul class="dense-list">
                    <li>Control - User-directed actions vs autonomous</li>
                    <li>Authorship - User contribution to output</li>
                    <li>Transparency - Understanding system behavior</li>
                    <li>Ownership - Intellectual property rights</li>
                    <li>Flexibility - Customization capability</li>
                </ul>

                <div class="card">
                    <h4>Automated Metrics Proposed for NabokovsWeb</h4>
                    <ul class="dense-list">
                        <li><strong>Spatial control:</strong> user-initiated moves vs auto-arrange</li>
                        <li><strong>Memory control:</strong> cards edited/deleted by user</li>
                        <li><strong>Belief agency:</strong> connection deletions, content edits</li>
                        <li><strong>Decision agency:</strong> user-triggered generation vs autonomous</li>
                        <li><strong>Meta-cognitive:</strong> history navigation, exports</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Information Foraging Theory Applications</strong> <span class="badge high">HIGH</span></div>
            </div>
            <div class="collapsible-content">
                <p><strong>Pirolli & Card framework</strong> validates dual-mode design (foraging ‚Üí sensemaking)</p>

                <h4>Information Scent Patterns Discovered:</h4>
                <ul class="dense-list">
                    <li><strong>Strong scent</strong> = semantic similarity + spatial proximity</li>
                    <li><strong>Weak scent</strong> causes abandonment</li>
                    <li><strong>Multi-level abstraction</strong> reduces cognitive load</li>
                </ul>

                <p class="indent-1">üìä <strong>Application:</strong> Cards should show semantic similarity via color/distance + support hierarchical grouping</p>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Web Platform Evolution (400+ API searches across 51 rounds)</strong> <span class="badge medium">MEDIUM</span></div>
            </div>
            <div class="collapsible-content">
                <p><strong>Production-Ready Baseline:</strong> <span class="stat">149+ APIs</span></p>

                <div class="two-column">
                    <div class="card">
                        <h4>Web Components (8 APIs)</h4>
                        <ul class="dense-list">
                            <li>Shadow DOM</li>
                            <li>Custom Elements</li>
                            <li>Declarative Shadow DOM</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>Modern CSS (8 APIs)</h4>
                        <ul class="dense-list">
                            <li>Container Queries</li>
                            <li>View Transitions</li>
                            <li>:has() selector</li>
                            <li>Cascade Layers</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>Parallelism Stack (8 APIs)</h4>
                        <ul class="dense-list">
                            <li>Web Workers</li>
                            <li>Service Workers</li>
                            <li>OffscreenCanvas</li>
                            <li>SharedArrayBuffer</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>Real-Time Protocols (8 APIs)</h4>
                        <ul class="dense-list">
                            <li>WebRTC</li>
                            <li>WebTransport</li>
                            <li>WebSockets</li>
                            <li>Server-Sent Events</li>
                        </ul>
                    </div>

                    <div class="card">
                        <h4>Storage Ecosystem (8 APIs)</h4>
                        <ul class="dense-list">
                            <li>IndexedDB</li>
                            <li>Cache API</li>
                            <li>OPFS</li>
                            <li>Storage Manager</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üîç Critical Patterns Identified</h2>

        <div class="collapsible critical">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Pattern 1: Bidirectional Links Are Universal</strong> <span class="badge critical">CRITICAL GAP</span></div>
            </div>
            <div class="collapsible-content">
                <p><strong>Present in:</strong> Roam, Obsidian, VKB, (Orca implicit)</p>
                <p class="card priority"><strong>‚ö†Ô∏è NabokovsWeb Gap:</strong> Missing backlinks panel (HIGH PRIORITY)</p>
            </div>
        </div>

        <div class="collapsible critical">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Pattern 2: Multilevel Abstraction Required at Scale</strong> <span class="badge critical">CRITICAL GAP</span></div>
            </div>
            <div class="collapsible-content">
                <p><strong>Evidence:</strong></p>
                <ul class="dense-list">
                    <li>Sensecape hierarchy view</li>
                    <li>VKB workspace hierarchy</li>
                    <li>React Flow parent nodes</li>
                </ul>
                <p class="card priority"><strong>‚ö†Ô∏è NabokovsWeb Status:</strong> Flat structure doesn't scale to 100+ cards</p>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Pattern 3: AI as Co-Pilot, Not Autopilot</strong> <span class="badge high">VALIDATED</span></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>Orca:</strong> "User-driven, AI-facilitated"</li>
                    <li><strong>GazeNoter (CHI 2025):</strong> User selects LLM suggestions via gaze</li>
                    <li><strong>‚úÖ Validation:</strong> NabokovsWeb's user-triggered generation is correct approach</li>
                </ul>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Pattern 4: Multiple Views of Same Data</strong> <span class="badge high">NEEDED</span></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>Sensecape:</strong> Canvas + Hierarchy</li>
                    <li><strong>Obsidian:</strong> Editor + Canvas + Graph</li>
                    <li><strong>Temporal UI:</strong> Compact + Timeline + Full</li>
                    <li><strong>‚ö†Ô∏è NabokovsWeb Status:</strong> Canvas-only limits flexibility</li>
                </ul>
            </div>
        </div>

        <div class="collapsible critical">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Pattern 5: History/Versioning Critical</strong> <span class="badge critical">CRITICAL GAP</span></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>VKB:</strong> Navigable history</li>
                    <li><strong>Upwelling (Ink & Switch 2024):</strong> Real-time + asynchronous collaboration with version control</li>
                    <li><strong>DirectGPT:</strong> Undo critical for agency</li>
                    <li><strong>‚ö†Ô∏è NabokovsWeb Gap:</strong> No version history (CRITICAL)</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üèÜ Competitive Positioning</h2>

        <div class="card priority">
            <h3>Unique Combination (No Competitor Has All 4)</h3>
            <ol class="dense-list">
                <li><strong>Element-level web capture</strong> (not page-level like Orca)</li>
                <li><strong>Spatial canvas organization</strong> (not linear like ChatGPT)</li>
                <li><strong>LLM-powered generation</strong> (not just extraction)</li>
                <li><strong>Incremental formalization</strong> (not premature structure like Notion)</li>
            </ol>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Direct Competitors Analysis</strong></div>
            </div>
            <div class="collapsible-content">
                <table>
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>Spatial</th>
                            <th>Granularity</th>
                            <th>Generative</th>
                            <th>Web Capture</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Orca</strong></td>
                            <td>‚úÖ Canvas</td>
                            <td>Page-level</td>
                            <td>‚ùå Extract only</td>
                            <td>‚úÖ Full pages</td>
                        </tr>
                        <tr>
                            <td><strong>Sensecape</strong></td>
                            <td>‚úÖ Canvas + Hierarchy</td>
                            <td>Unknown</td>
                            <td>‚ùå No</td>
                            <td>‚ùå No</td>
                        </tr>
                        <tr>
                            <td><strong>Notion</strong></td>
                            <td>‚ùå Linear</td>
                            <td>Manual input</td>
                            <td>‚úÖ GPT-4</td>
                            <td>‚ùå No</td>
                        </tr>
                        <tr>
                            <td><strong>Obsidian</strong></td>
                            <td>‚ö†Ô∏è Canvas plugin</td>
                            <td>Manual</td>
                            <td>‚ö†Ô∏è Plugins</td>
                            <td>‚ùå No</td>
                        </tr>
                        <tr style="background: rgba(255, 215, 0, 0.2);">
                            <td><strong>NabokovsWeb</strong></td>
                            <td>‚úÖ Canvas</td>
                            <td><strong>Element-level</strong></td>
                            <td>‚úÖ Claude</td>
                            <td>‚úÖ Elements</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üí° Technical Architecture Insights</h2>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Chrome Extension Manifest V3 Best Practices</strong></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li>Service workers are ephemeral (no persistent state)</li>
                    <li>Top-level event listener registration required</li>
                    <li>Offscreen API for DOM operations in workers</li>
                    <li>ES Modules support with <code>"type": "module"</code></li>
                </ul>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Performance Optimization Strategies</strong></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><code>scheduler.yield()</code> for breaking up long tasks (prevent blocking)</li>
                    <li><strong>Web Workers</strong> for CPU-intensive operations (screenshot compression)</li>
                    <li><strong>OffscreenCanvas</strong> for worker-based rendering</li>
                    <li><strong>CompressionStream</strong> for 70-90% size reduction in exports</li>
                </ul>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Storage Architecture</strong></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>chrome.storage.local:</strong> Card metadata (~5MB limit after JSON)</li>
                    <li><strong>IndexedDB:</strong> Screenshots, large blobs</li>
                    <li><strong>OPFS (future):</strong> Private file system for desktop-grade performance</li>
                    <li><strong>Quota monitoring:</strong> Warn at 80%, suggest cleanup at 90%</li>
                </ul>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Collaboration Architecture Options</strong></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>CRDT (Yjs):</strong> Conflict-free replication, peer-to-peer possible</li>
                    <li><strong>Operational Transform:</strong> Requires active server</li>
                    <li><strong>Recommendation:</strong> Yjs for real-time, chrome.storage.sync for async</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <h2>‚úÖ Implemented Features (from features.md)</h2>
        <p><span class="badge completed">76 features completed (~53%)</span></p>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Phase 1-3: Core Functionality (Completed)</strong></div>
            </div>
            <div class="collapsible-content">
                <div class="two-column">
                    <ul class="dense-list">
                        <li>‚úÖ Element Selector (Shadow DOM)</li>
                        <li>‚úÖ Spatial Canvas (React Flow)</li>
                        <li>‚úÖ Screenshot Capture (optional)</li>
                        <li>‚úÖ Card Storage (chrome.storage + IndexedDB)</li>
                        <li>‚úÖ LLM Integration (Claude API)</li>
                        <li>‚úÖ Custom Buttons (templates)</li>
                        <li>‚úÖ Card Generation (AI child cards)</li>
                        <li>‚úÖ Connections (typed arrows)</li>
                        <li>‚úÖ Fill-In Feature (synthesis)</li>
                    </ul>
                    <ul class="dense-list">
                        <li>‚úÖ Beautification (AI enhancement)</li>
                        <li>‚úÖ Edge Editing (connection types)</li>
                        <li>‚úÖ Inline Editing (contentEditable)</li>
                        <li>‚úÖ Image Upload (drag-drop)</li>
                        <li>‚úÖ Chat Modal (per-card conversations)</li>
                        <li>‚úÖ Floating Windows (draggable chat)</li>
                        <li>‚úÖ Toast Notifications</li>
                        <li>‚úÖ API Settings (secure key mgmt)</li>
                        <li>‚úÖ Chrome Side Panel Stash</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üöÄ Planned Features (from features.md)</h2>
        <p><span class="badge high">67 features planned (~47%)</span></p>

        <div class="important-always-visible">
            <h2>Priority 0 - CRITICAL (Blockers for v1.0)</h2>

            <div class="card priority">
                <h3>F9.4: Study-Ready Telemetry <span class="badge critical">1-2 days</span></h3>
                <ul class="dense-list">
                    <li>Log card creations, button clicks, search queries, retrieval attempts</li>
                    <li>Privacy-preserving (opt-in, de-identified, local storage)</li>
                    <li>Export function for researcher analysis</li>
                    <li><strong>üö´ Blocker:</strong> Cannot run user study without quantitative data</li>
                </ul>
            </div>

            <div class="card priority">
                <h3>F10.5: GDPR Compliance Suite <span class="badge critical">1 week</span></h3>
                <ul class="dense-list">
                    <li>Granular consent management</li>
                    <li>Right to data portability (machine-readable JSON export)</li>
                    <li>Right to erasure (30-day grace period)</li>
                    <li>Anonymization pipeline (NER + entity replacement)</li>
                    <li><strong>üö´ Blocker:</strong> Cannot deploy to EU without compliance (legal requirement)</li>
                </ul>
            </div>

            <div class="card priority">
                <h3>F8.6: Hybrid LLM Prompting <span class="badge critical">1 day</span></h3>
                <ul class="dense-list">
                    <li>Few-shot + Chain-of-Thought + role + format hybrid</li>
                    <li>Improves JSON parsing success rate (>95%)</li>
                    <li>Reduces malformed HTML outputs</li>
                    <li><strong>Impact:</strong> Improves existing cardGenerationService reliability</li>
                </ul>
            </div>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Priority 1 - HIGH (Foundation Features)</strong> <span class="badge high">8 features</span></div>
            </div>
            <div class="collapsible-content">
                <div class="card">
                    <h4>F8.1: NodeResizer for Cards <span class="stat">0.5 days</span></h4>
                    <p>React Flow 11+ built-in resizing handles. Impact: -50 lines custom code, better UX</p>
                </div>

                <div class="card">
                    <h4>F8.2: Node Drag Handles <span class="stat">0.5 days</span></h4>
                    <p>Dedicated drag handle (prevent accidental moves). Impact: Better interaction precision</p>
                </div>

                <div class="card">
                    <h4>F8.3: IndexedDB Sharding <span class="stat">2-3 days</span></h4>
                    <p>Partition by date/domain/tag for faster queries. Impact: 10x query speedup for large datasets</p>
                </div>

                <div class="card priority">
                    <h4>F8.4: Client-Side Semantic Search <span class="stat">3-5 days</span></h4>
                    <ul class="dense-list">
                        <li>Transformers.js with <code>Xenova/all-MiniLM-L6-v2</code> model</li>
                        <li>384-dimension embeddings (~1.5KB per card)</li>
                        <li>Fully offline, privacy-preserving</li>
                        <li><strong>üî• Impact: Killer feature, differentiates from all competitors</strong></li>
                    </ul>
                </div>

                <div class="card">
                    <h4>F0.1: Backlinks Panel <span class="stat">0.5 days</span></h4>
                    <p>Show incoming connections to current card. Impact: Competitive parity with Roam/Obsidian</p>
                </div>

                <div class="card">
                    <h4>F1.1: Undo/Redo System <span class="stat">2-3 days</span></h4>
                    <p>Command pattern implementation. Impact: User confidence, error recovery</p>
                </div>

                <div class="card">
                    <h4>F3.4: Graph View <span class="stat">3-4 days</span></h4>
                    <p>Cytoscape.js for network visualization. Impact: Competitive expectation, find isolated cards</p>
                </div>

                <div class="card priority">
                    <h4>F0.2: Multilevel Abstraction <span class="stat">4-5 days</span></h4>
                    <p>React Flow parent nodes for grouping. Impact: Scales to 100+ cards</p>
                </div>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Priority 2 - MEDIUM (Enhancement Features)</strong> <span class="badge medium">8 features</span></div>
            </div>
            <div class="collapsible-content">
                <div class="card">
                    <h4>F8.5: Auto-Clustering Cards <span class="stat">2 days</span> (depends on F8.4)</h4>
                    <p>k-means clustering on embeddings. Impact: Discovers knowledge domains</p>
                </div>

                <div class="card">
                    <h4>F9.1: Retrieval Time Dashboard <span class="stat">2-3 days</span></h4>
                    <p>Track time to locate cards. LAK 2025 standard: 70% retrievals <30 seconds. Impact: Validates RQ3 in user study</p>
                </div>

                <div class="card">
                    <h4>F21.1: File System Access Export/Import <span class="stat">3-5 days</span></h4>
                    <p>Native browser file picker. Impact: Data portability, user-owned backups</p>
                </div>

                <div class="card">
                    <h4>F21.2: Broadcast Channel Cross-Tab Sync <span class="stat">2-3 days</span></h4>
                    <p>Real-time sync across multiple canvas tabs. Impact: Better multi-tab UX</p>
                </div>

                <div class="card">
                    <h4>F23.1: Performance Monitoring Dashboard <span class="stat">3-5 days</span></h4>
                    <p>Real-time Web Vitals (LCP, CLS, INP, FCP, TTFB). Impact: Data-driven performance optimization</p>
                </div>

                <div class="card">
                    <h4>F23.2: Long Task Prevention <span class="stat">2-3 days</span></h4>
                    <p>scheduler.yield() for chunked rendering. Impact: INP <200ms, smooth interactions</p>
                </div>

                <div class="card priority">
                    <h4>F40.11: WebSocket Real-Time Sync <span class="stat">2 weeks</span> (Phase 1)</h4>
                    <ul class="dense-list">
                        <li>Live collaborative canvas</li>
                        <li>Presence system (active users, cursors)</li>
                        <li>Conflict detection and resolution</li>
                        <li><strong>Impact: Team tier differentiator</strong></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Priority 3 - LOW (Future/Exploratory)</strong> <span class="badge low">6 features</span></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>F10.1:</strong> EMA Mobile Companion (2-3 weeks) - Flutter app for 3x/day prompts</li>
                    <li><strong>F10.2:</strong> Real-Time Collaboration (3-4 weeks) - Yjs CRDT for conflict-free replication</li>
                    <li><strong>F10.3:</strong> Preregistration Integration (1 week) - OSF API for study preregistration</li>
                    <li><strong>F12.1:</strong> PLG Metrics Dashboard (2-3 weeks) - Activation, retention, engagement tracking</li>
                    <li><strong>F12.2:</strong> Community Platform (1-2 weeks) - Discord server + canvas sharing</li>
                    <li><strong>F12.3:</strong> Public API + Developer Portal (6-8 weeks) - RESTful + GraphQL endpoints</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <div class="important-always-visible">
            <h2>üìã TODOs & Action Items</h2>

            <h3>üî¥ Immediate (Week 1-2)</h3>
            <ol class="dense-list">
                <li><strong>F9.4:</strong> Implement study telemetry (BLOCKER for user study)</li>
                <li><strong>F8.6:</strong> Hybrid LLM prompting (fix cardGenerationService)</li>
                <li><strong>F10.5:</strong> GDPR compliance (BLOCKER for EU deployment)</li>
                <li><strong>F0.1:</strong> Backlinks panel (competitive parity)</li>
            </ol>

            <h3>üü° Short-Term (Weeks 3-6)</h3>
            <ol class="dense-list" start="5">
                <li><strong>F8.4:</strong> Client-side semantic search (killer feature)</li>
                <li><strong>F0.2:</strong> Multilevel abstraction (scales to 100+ cards)</li>
                <li><strong>F3.4:</strong> Graph view (competitive expectation)</li>
                <li><strong>F1.1:</strong> Undo/redo system (user confidence)</li>
            </ol>

            <h3>üü¢ Medium-Term (Months 2-3)</h3>
            <ol class="dense-list" start="9">
                <li><strong>F9.1:</strong> Retrieval dashboard (user study RQ3)</li>
                <li><strong>F40.11:</strong> WebSocket real-time sync (collaboration Phase 1)</li>
                <li><strong>F21.1:</strong> File System Access export/import</li>
                <li><strong>F23.1:</strong> Performance monitoring dashboard</li>
            </ol>
        </div>

        <div class="collapsible high">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>User Study Timeline (CHI 2026 Target)</strong> <span class="badge high">~30 weeks</span></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>Week 1-2:</strong> Implement F9.4 (telemetry) + F9.1 (retrieval dashboard)</li>
                    <li><strong>Week 3-4:</strong> Pilot study (N=4), protocol refinement</li>
                    <li><strong>Week 5-10:</strong> Full data collection (N=24)</li>
                    <li><strong>Week 11-24:</strong> Analysis + manuscript preparation</li>
                    <li><strong>Week 30:</strong> (~Sept 2025) CHI 2026 submission deadline</li>
                </ul>
            </div>
        </div>

        <div class="collapsible medium">
            <div class="collapsible-header">
                <div><span class="arrow">‚ñ∂</span><strong>Architecture Refactoring</strong></div>
            </div>
            <div class="collapsible-content">
                <ul class="dense-list">
                    <li><strong>Migrate to Preact Signals:</strong> 10x faster updates, 6x smaller bundle</li>
                    <li><strong>Upgrade to Vite 6:</strong> Environment API</li>
                    <li><strong>Biome linter/formatter:</strong> 25x faster than Prettier</li>
                    <li><strong>Lit Web Components:</strong> for isolated components (5KB vs React 42KB)</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <h2>üéØ Performance Opportunities</h2>
        <div class="two-column">
            <div class="card priority">
                <h4>Web Workers for Screenshot Compression</h4>
                <p><span class="stat">98%</span> responsiveness improvement</p>
            </div>

            <div class="card priority">
                <h4>CompressionStream for Exports</h4>
                <p><span class="stat">70-90%</span> size reduction</p>
            </div>

            <div class="card priority">
                <h4>IndexedDB Sharding</h4>
                <p><span class="stat">10x</span> query speedup</p>
            </div>

            <div class="card priority">
                <h4>scheduler.yield()</h4>
                <p>Eliminate UI freezing</p>
            </div>
        </div>

        <div class="divider"></div>

        <div class="important-always-visible">
            <h2>üìä Research Methodologies Discovered</h2>

            <div class="card">
                <h3>User Study Design (Round 9)</h3>
                <ul class="dense-list">
                    <li><strong>RQ1:</strong> Epistemic agency (EASS scale vs ChatGPT baseline)</li>
                    <li><strong>RQ2:</strong> Foraging efficiency (cards/min, time to insight)</li>
                    <li><strong>RQ3:</strong> Sensemaking quality (concept test, connection depth)</li>
                    <li><strong>RQ4:</strong> Incremental formalization (time to first connection)</li>
                    <li><strong>Target:</strong> N=24 (between-subjects), CHI 2026 submission</li>
                </ul>
            </div>

            <div class="card">
                <h3>Experience Sampling Method (ESM/EMA)</h3>
                <ul class="dense-list">
                    <li>3x/day prompts for 2 weeks</li>
                    <li>Captures real-time usage in natural contexts</li>
                    <li>Ecological validity > lab studies</li>
                    <li><strong>WARN-D study:</strong> 599 participants, 360 timepoints</li>
                </ul>
            </div>

            <div class="card">
                <h3>Generalizability Theory (G-Theory)</h3>
                <ul class="dense-list">
                    <li>Decomposes measurement error (persons, items, occasions)</li>
                    <li><strong>Target G-coefficient:</strong> ‚â•0.80 for reliable scale</li>
                    <li>Optimizes study design (how many items/timepoints needed)</li>
                </ul>
            </div>
        </div>

        <div class="divider"></div>

        <footer style="text-align: center; padding: 24px; color: var(--level-3); font-size: 12px;">
            <p><strong>üìù Synthesis covers 68,000+ lines from memory.md and 18,000+ lines from features.md</strong></p>
            <p>Generated: <span id="timestamp"></span></p>
        </footer>
    </div>

    <script>
        // Set timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();

        // Collapsible functionality
        document.querySelectorAll('.collapsible-header').forEach(header => {
            header.addEventListener('click', () => {
                const collapsible = header.parentElement;
                collapsible.classList.toggle('open');
            });
        });

        // Expand/Collapse all
        let allExpanded = false;
        function toggleAll() {
            const collapsibles = document.querySelectorAll('.collapsible');
            allExpanded = !allExpanded;

            collapsibles.forEach(c => {
                if (allExpanded) {
                    c.classList.add('open');
                } else {
                    c.classList.remove('open');
                }
            });
        }
    </script>
</body>
</html>
