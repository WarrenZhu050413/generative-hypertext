<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nelson's Hypertext Concepts: Interactive Demos</title>
    <style>
        :root {
            --chinese-red: #8B0000;
            --chinese-gold: #FFD700;
            --paper-beige: #F5F5DC;
            --light-cream: #FFFEF0;
            --ink-black: #1a1a1a;
            --level-1: #8B0000;
            --level-2: #CD5C5C;
            --level-3: #666;
            --link-blue: #0066cc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--paper-beige) 0%, var(--light-cream) 100%);
            color: var(--ink-black);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.4;
            font-size: 14px;
            padding: 12px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            font-weight: 900;
            margin: 10px 0;
            padding: 10px;
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 {
            font-size: 20px;
            font-weight: 700;
            margin: 16px 0 8px 0;
            padding: 6px 10px;
            border-left: 4px solid var(--chinese-red);
            background: rgba(139, 0, 0, 0.05);
            color: var(--level-1);
        }

        h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 10px 0 6px 0;
            color: var(--level-2);
        }

        .demo-section {
            background: white;
            border: 2px solid var(--chinese-gold);
            padding: 16px;
            margin: 16px 0;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .explanation {
            background: rgba(255, 215, 0, 0.1);
            border-left: 3px solid var(--chinese-gold);
            padding: 10px;
            margin: 10px 0;
            font-size: 13px;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 12px 0;
        }

        .comparison-item {
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(139, 0, 0, 0.2);
            padding: 12px;
            border-radius: 3px;
        }

        .comparison-item h4 {
            color: var(--level-1);
            margin-bottom: 8px;
            font-size: 14px;
        }

        /* Demo 1: Bidirectional Links */
        .document-box {
            background: white;
            border: 2px solid var(--level-2);
            padding: 14px;
            margin: 10px 0;
            border-radius: 4px;
            position: relative;
        }

        .document-box.highlight {
            border-color: var(--chinese-gold);
            background: rgba(255, 215, 0, 0.08);
            box-shadow: 0 0 12px rgba(255, 215, 0, 0.4);
        }

        .document-title {
            font-weight: 700;
            color: var(--level-1);
            margin-bottom: 8px;
            font-size: 15px;
        }

        .link-out {
            color: var(--link-blue);
            text-decoration: underline;
            cursor: pointer;
            font-weight: 600;
        }

        .link-out:hover {
            background: rgba(0, 102, 204, 0.1);
        }

        .backlinks {
            margin-top: 12px;
            padding-top: 10px;
            border-top: 2px solid rgba(139, 0, 0, 0.1);
            font-size: 12px;
        }

        .backlinks-title {
            font-weight: 600;
            color: var(--level-2);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .backlink-item {
            color: var(--link-blue);
            cursor: pointer;
            padding: 3px 6px;
            margin: 2px 0;
            display: inline-block;
            background: rgba(0, 102, 204, 0.05);
            border-radius: 2px;
            font-size: 12px;
        }

        .backlink-item:hover {
            background: rgba(0, 102, 204, 0.15);
        }

        /* Demo 2: Version Comparison */
        .version-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 12px 0;
        }

        .version-doc {
            border: 2px solid var(--level-3);
            padding: 12px;
            background: white;
            border-radius: 4px;
        }

        .version-doc.v1 {
            border-color: #4CAF50;
        }

        .version-doc.v2 {
            border-color: #2196F3;
        }

        .version-header {
            font-weight: 700;
            margin-bottom: 10px;
            padding: 6px;
            border-radius: 3px;
            font-size: 14px;
        }

        .version-doc.v1 .version-header {
            background: rgba(76, 175, 80, 0.1);
            color: #2E7D32;
        }

        .version-doc.v2 .version-header {
            background: rgba(33, 150, 243, 0.1);
            color: #1565C0;
        }

        .paragraph {
            padding: 8px;
            margin: 6px 0;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 13px;
            line-height: 1.5;
        }

        .paragraph:hover {
            background: rgba(255, 215, 0, 0.15);
        }

        .paragraph.linked {
            border-left: 3px solid var(--chinese-gold);
            background: rgba(255, 215, 0, 0.05);
        }

        .paragraph.highlighted {
            background: rgba(255, 215, 0, 0.25);
            border-left: 4px solid var(--chinese-red);
            transform: scale(1.02);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.2);
        }

        .paragraph .link-indicator {
            position: absolute;
            right: 8px;
            top: 8px;
            font-size: 10px;
            color: var(--chinese-gold);
            font-weight: bold;
        }

        .diff-marker {
            background: rgba(255, 235, 59, 0.4);
            padding: 2px 4px;
            border-radius: 2px;
            font-weight: 600;
        }

        .diff-marker.added {
            background: rgba(76, 175, 80, 0.3);
        }

        .diff-marker.removed {
            background: rgba(244, 67, 54, 0.3);
            text-decoration: line-through;
        }

        /* Demo 3: Transclusion */
        .transclusion-demo {
            margin: 12px 0;
        }

        .source-document {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid #4CAF50;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .target-document {
            background: rgba(33, 150, 243, 0.1);
            border: 2px solid #2196F3;
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .transcluded-content {
            background: rgba(255, 215, 0, 0.2);
            border: 2px dashed var(--chinese-gold);
            padding: 10px;
            margin: 8px 0;
            border-radius: 3px;
            position: relative;
            font-size: 13px;
        }

        .transcluded-content::before {
            content: "📎 TRANSCLUDED from: ";
            font-size: 11px;
            font-weight: 600;
            color: var(--level-2);
            display: block;
            margin-bottom: 6px;
        }

        .transcluded-content .source-ref {
            font-size: 11px;
            color: var(--link-blue);
            font-weight: 600;
        }

        .editable-section {
            background: white;
            border: 1px solid #ccc;
            padding: 8px;
            margin: 6px 0;
            border-radius: 3px;
            min-height: 60px;
            font-size: 13px;
        }

        .editable-section[contenteditable="true"] {
            border-color: var(--chinese-gold);
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
        }

        /* Demo 4: Parallel Documents */
        .parallel-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 12px 0;
            position: relative;
        }

        .parallel-doc {
            background: white;
            border: 2px solid var(--level-3);
            padding: 12px;
            border-radius: 4px;
        }

        .parallel-doc.lang-en {
            border-color: #E91E63;
        }

        .parallel-doc.lang-fr {
            border-color: #3F51B5;
        }

        .parallel-header {
            font-weight: 700;
            padding: 6px;
            margin-bottom: 10px;
            border-radius: 3px;
            font-size: 14px;
        }

        .parallel-doc.lang-en .parallel-header {
            background: rgba(233, 30, 99, 0.1);
            color: #C2185B;
        }

        .parallel-doc.lang-fr .parallel-header {
            background: rgba(63, 81, 181, 0.1);
            color: #283593;
        }

        .aligned-section {
            padding: 10px;
            margin: 8px 0;
            border-radius: 3px;
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
            line-height: 1.5;
        }

        .aligned-section:hover {
            background: rgba(255, 215, 0, 0.1);
            border-left-color: var(--chinese-gold);
        }

        .aligned-section.active {
            background: rgba(255, 215, 0, 0.25);
            border-left: 4px solid var(--chinese-red);
            transform: scale(1.02);
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.2);
        }

        .section-number {
            font-weight: 700;
            color: var(--level-1);
            margin-bottom: 4px;
            font-size: 12px;
        }

        .connection-line {
            position: absolute;
            height: 2px;
            background: var(--chinese-gold);
            z-index: 10;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .connection-line.visible {
            opacity: 1;
        }

        button, .button {
            background: linear-gradient(135deg, var(--chinese-red), #CD5C5C);
            color: white;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s ease;
            margin: 4px;
        }

        button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 0, 0, 0.3);
        }

        .interactive-hint {
            background: rgba(33, 150, 243, 0.1);
            border-left: 3px solid #2196F3;
            padding: 8px;
            margin: 10px 0;
            font-size: 12px;
            font-style: italic;
            color: #1565C0;
        }

        .web-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 12px 0;
        }

        .web-example {
            background: rgba(244, 67, 54, 0.05);
            border: 2px solid #F44336;
            padding: 10px;
            border-radius: 4px;
        }

        .nelson-example {
            background: rgba(76, 175, 80, 0.05);
            border: 2px solid #4CAF50;
            padding: 10px;
            border-radius: 4px;
        }

        .example-title {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .web-example .example-title {
            color: #C62828;
        }

        .nelson-example .example-title {
            color: #2E7D32;
        }

        code {
            background: rgba(0, 0, 0, 0.05);
            padding: 2px 6px;
            border-radius: 2px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 12px;
        }

        .status-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 600;
            margin-left: 8px;
        }

        .status-implemented {
            background: rgba(76, 175, 80, 0.2);
            color: #2E7D32;
        }

        .status-partial {
            background: rgba(255, 152, 0, 0.2);
            color: #E65100;
        }

        .status-missing {
            background: rgba(244, 67, 54, 0.2);
            color: #C62828;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔗 Nelson's Hypertext Vision: Interactive Demos</h1>

        <div class="explanation">
            <strong>What you'll see:</strong> Four concepts Nelson described in 1965 that the web still doesn't fully implement. Click and interact with each demo to understand how they work.
        </div>

        <!-- Demo 1: Bidirectional Links -->
        <div class="demo-section">
            <h2>1. Bidirectional Links <span class="status-badge status-partial">Partially Implemented</span></h2>

            <div class="explanation">
                <strong>The Problem:</strong> On the web, if Page A links to Page B, Page B has no idea it's being linked to. You can't see "what links here" without external tools.
                <br><strong>Nelson's Solution:</strong> Links work both ways automatically. If A→B, then B shows "A links to me."
            </div>

            <div class="comparison">
                <div class="comparison-item web-example">
                    <div class="example-title">❌ Current Web</div>
                    <p style="font-size: 13px; line-height: 1.5;">You write a blog post linking to someone's article. They have NO IDEA you linked to them (unless you tell them or they use Google's "link:" operator).</p>
                </div>
                <div class="comparison-item nelson-example">
                    <div class="example-title">✅ Nelson's Vision</div>
                    <p style="font-size: 13px; line-height: 1.5;">When you link to someone's article, they automatically see "Your article was linked from [your blog]" at the bottom. Both directions are always visible.</p>
                </div>
            </div>

            <div class="interactive-hint">
                💡 <strong>Try it:</strong> Click the blue links below. Notice how the target document highlights AND shows who linked to it.
            </div>

            <div id="bidirectional-demo">
                <div class="document-box" data-doc="hypertext">
                    <div class="document-title">📄 Document A: "What is Hypertext?"</div>
                    <p style="font-size: 13px; line-height: 1.5;">
                        Hypertext is a concept invented by Ted Nelson. It involves
                        <span class="link-out" data-target="bidirectional">bidirectional linking</span> and
                        <span class="link-out" data-target="transclusion">transclusion</span>.
                    </p>
                    <div class="backlinks">
                        <div class="backlinks-title">
                            🔙 Backlinks (who links here):
                        </div>
                        <div class="backlinks-list"></div>
                    </div>
                </div>

                <div class="document-box" data-doc="bidirectional">
                    <div class="document-title">📄 Document B: "Bidirectional Links"</div>
                    <p style="font-size: 13px; line-height: 1.5;">
                        Bidirectional links mean that when Document A links to Document B,
                        Document B automatically shows that Document A is linking to it.
                        This is core to <span class="link-out" data-target="hypertext">hypertext</span>.
                    </p>
                    <div class="backlinks">
                        <div class="backlinks-title">🔙 Backlinks (who links here):</div>
                        <div class="backlinks-list"></div>
                    </div>
                </div>

                <div class="document-box" data-doc="transclusion">
                    <div class="document-title">📄 Document C: "Transclusion Explained"</div>
                    <p style="font-size: 13px; line-height: 1.5;">
                        Transclusion allows content from one document to appear in another
                        without copying. It's different from <span class="link-out" data-target="bidirectional">bidirectional links</span>
                        but related to <span class="link-out" data-target="hypertext">hypertext</span>.
                    </p>
                    <div class="backlinks">
                        <div class="backlinks-title">🔙 Backlinks (who links here):</div>
                        <div class="backlinks-list"></div>
                    </div>
                </div>
            </div>

            <div class="explanation" style="margin-top: 12px;">
                <strong>Real-world partial implementations:</strong>
                <ul style="margin: 8px 0 0 20px; font-size: 13px;">
                    <li><strong>Wikipedia:</strong> "What links here" feature in left sidebar</li>
                    <li><strong>Obsidian/Roam:</strong> Automatic backlinks panel</li>
                    <li><strong>GitHub:</strong> Shows PRs/issues that reference each other</li>
                </ul>
            </div>
        </div>

        <!-- Demo 2: Version Comparison with Linked Passages -->
        <div class="demo-section">
            <h2>2. Multiple Versions with Linked Passages <span class="status-badge status-partial">Partially Implemented</span></h2>

            <div class="explanation">
                <strong>The Concept:</strong> When you create version 2 of a document, the system remembers which paragraphs in v2 came from which paragraphs in v1. You can see both versions side-by-side with visual connections showing how text evolved.
            </div>

            <div class="interactive-hint">
                💡 <strong>Try it:</strong> Hover over paragraphs in either version to see the corresponding paragraph in the other version light up.
            </div>

            <div class="version-container">
                <div class="version-doc v1">
                    <div class="version-header">📝 Draft 1 (Monday)</div>
                    <div class="paragraph linked" data-link="intro">
                        <span class="link-indicator">↔️</span>
                        Our company was founded in 2020 to solve the problem of data overload.
                    </div>
                    <div class="paragraph linked" data-link="mission">
                        <span class="link-indicator">↔️</span>
                        Our mission is to help people organize information efficiently.
                    </div>
                    <div class="paragraph linked" data-link="tech">
                        <span class="link-indicator">↔️</span>
                        We use machine learning and natural language processing.
                    </div>
                    <div class="paragraph" data-link="removed">
                        <span class="link-indicator">🗑️</span>
                        <span class="diff-marker removed">We are seeking Series A funding.</span>
                    </div>
                </div>

                <div class="version-doc v2">
                    <div class="version-header">📝 Draft 2 (Wednesday - Revised)</div>
                    <div class="paragraph linked" data-link="intro">
                        <span class="link-indicator">↔️</span>
                        Our company was founded in <span class="diff-marker">early</span> 2020 to solve the <span class="diff-marker added">critical</span> problem of data overload <span class="diff-marker added">in enterprise environments</span>.
                    </div>
                    <div class="paragraph linked" data-link="mission">
                        <span class="link-indicator">↔️</span>
                        Our mission is to help <span class="diff-marker added">Fortune 500 companies</span> organize information efficiently <span class="diff-marker added">and make data-driven decisions faster</span>.
                    </div>
                    <div class="paragraph" data-link="new">
                        <span class="link-indicator">✨</span>
                        <span class="diff-marker added">Our platform has processed over 10 million documents to date.</span>
                    </div>
                    <div class="paragraph linked" data-link="tech">
                        <span class="link-indicator">↔️</span>
                        We use <span class="diff-marker added">cutting-edge</span> machine learning and natural language processing <span class="diff-marker added">powered by transformer models</span>.
                    </div>
                </div>
            </div>

            <div class="explanation" style="margin-top: 12px;">
                <strong>Key insight:</strong> Nelson wanted writers to see <em>how</em> their ideas evolved, not just the before/after. The links between paragraphs track conceptual relationships across versions.
                <br><br>
                <strong>Partial implementations:</strong> Git diff, Google Docs version history, Microsoft Word Track Changes — but none show <em>side-by-side linked passages</em> with persistent connections.
            </div>
        </div>

        <!-- Demo 3: Transclusion -->
        <div class="demo-section">
            <h2>3. Transclusion <span class="status-badge status-missing">Mostly Missing</span></h2>

            <div class="explanation">
                <strong>The Concept:</strong> Include content from Document A into Document B <em>by reference</em>, not by copying. If the original changes, all places that transclude it automatically update. It's like a "live embed."
            </div>

            <div class="web-comparison">
                <div class="web-example">
                    <div class="example-title">❌ Copy-Paste (Current Web)</div>
                    <p style="font-size: 13px; line-height: 1.5;">
                        You copy a paragraph from Document A to Document B. Later, Document A is updated with corrections. Document B still has the old, wrong text. You have to manually update it.
                    </p>
                </div>
                <div class="nelson-example">
                    <div class="example-title">✅ Transclusion (Nelson's Vision)</div>
                    <p style="font-size: 13px; line-height: 1.5;">
                        You transclude a paragraph from Document A into Document B. Document A is updated with corrections. Document B <strong>automatically</strong> shows the corrected text because it's referencing, not copying.
                    </p>
                </div>
            </div>

            <div class="interactive-hint">
                💡 <strong>Try it:</strong> Edit the text in the SOURCE document below. Watch it automatically update in the TARGET document (transcluded content).
            </div>

            <div class="transclusion-demo">
                <div class="source-document">
                    <div class="document-title">📄 SOURCE: "Company Bio" (master copy)</div>
                    <div class="editable-section" contenteditable="true" id="source-text">
                        Acme Corp was founded in 2020 by Jane Smith and John Doe. We specialize in cloud infrastructure.
                    </div>
                    <button onclick="updateTransclusion()">Update All Transclusions</button>
                </div>

                <div class="target-document">
                    <div class="document-title">📄 TARGET: "About Us" page</div>
                    <p style="font-size: 13px; margin-bottom: 8px;">Welcome to our company!</p>
                    <div class="transcluded-content">
                        <span class="source-ref">Source: Company Bio</span>
                        <div id="transcluded-text-1" style="margin-top: 6px;">
                            Acme Corp was founded in 2020 by Jane Smith and John Doe. We specialize in cloud infrastructure.
                        </div>
                    </div>
                    <p style="font-size: 13px; margin-top: 8px;">Contact us for more information.</p>
                </div>

                <div class="target-document">
                    <div class="document-title">📄 TARGET: "Investor Deck" slide</div>
                    <p style="font-size: 13px; margin-bottom: 8px;"><strong>Company Overview</strong></p>
                    <div class="transcluded-content">
                        <span class="source-ref">Source: Company Bio</span>
                        <div id="transcluded-text-2" style="margin-top: 6px;">
                            Acme Corp was founded in 2020 by Jane Smith and John Doe. We specialize in cloud infrastructure.
                        </div>
                    </div>
                </div>
            </div>

            <div class="explanation" style="margin-top: 12px;">
                <strong>Why this matters:</strong> Transclusion prevents information from becoming stale/inconsistent. Update once, update everywhere.
                <br><br>
                <strong>Partial implementations:</strong>
                <ul style="margin: 8px 0 0 20px; font-size: 13px;">
                    <li><strong>HTML iframes:</strong> Embed external content, but limited control</li>
                    <li><strong>Server-side includes (SSI):</strong> <code>&lt;!--#include file="header.html"--&gt;</code></li>
                    <li><strong>React components:</strong> Reuse components, but not for prose/content</li>
                    <li><strong>Notion's Synced Blocks:</strong> Closest modern implementation!</li>
                </ul>
            </div>
        </div>

        <!-- Demo 4: Parallel Documents -->
        <div class="demo-section">
            <h2>4. Parallel Documents with Aligned Sections <span class="status-badge status-partial">Partially Implemented</span></h2>

            <div class="explanation">
                <strong>The Concept:</strong> Two complete documents (e.g., translations, different editions, legal codes) shown side-by-side with corresponding sections linked. Click a section in one document to see its equivalent in the other.
            </div>

            <div class="interactive-hint">
                💡 <strong>Try it:</strong> Click any article below to see the aligned section in the other language highlight.
            </div>

            <div class="parallel-container" id="parallel-demo">
                <div class="parallel-doc lang-en">
                    <div class="parallel-header">🇬🇧 Treaty (English)</div>

                    <div class="aligned-section" data-align="article1">
                        <div class="section-number">Article 1: Purpose</div>
                        This treaty establishes the framework for international cooperation in climate policy.
                    </div>

                    <div class="aligned-section" data-align="article2">
                        <div class="section-number">Article 2: Definitions</div>
                        "Greenhouse gases" means carbon dioxide, methane, nitrous oxide, and fluorinated gases as specified in Annex A.
                    </div>

                    <div class="aligned-section" data-align="article3">
                        <div class="section-number">Article 3: Commitments</div>
                        Each party commits to reducing greenhouse gas emissions by 40% below 1990 levels by the year 2030.
                    </div>

                    <div class="aligned-section" data-align="article4">
                        <div class="section-number">Article 4: Reporting</div>
                        Parties shall submit annual reports detailing their emissions and reduction efforts to the Secretariat by March 31 each year.
                    </div>
                </div>

                <div class="parallel-doc lang-fr">
                    <div class="parallel-header">🇫🇷 Traité (Français)</div>

                    <div class="aligned-section" data-align="article1">
                        <div class="section-number">Article 1 : Objectif</div>
                        Ce traité établit le cadre de la coopération internationale en matière de politique climatique.
                    </div>

                    <div class="aligned-section" data-align="article2">
                        <div class="section-number">Article 2 : Définitions</div>
                        On entend par "gaz à effet de serre" le dioxyde de carbone, le méthane, l'oxyde nitreux et les gaz fluorés spécifiés à l'annexe A.
                    </div>

                    <div class="aligned-section" data-align="article3">
                        <div class="section-number">Article 3 : Engagements</div>
                        Chaque partie s'engage à réduire les émissions de gaz à effet de serre de 40 % par rapport aux niveaux de 1990 d'ici 2030.
                    </div>

                    <div class="aligned-section" data-align="article4">
                        <div class="section-number">Article 4 : Rapports</div>
                        Les parties présentent des rapports annuels détaillant leurs émissions et leurs efforts de réduction au Secrétariat avant le 31 mars de chaque année.
                    </div>
                </div>
            </div>

            <div class="explanation" style="margin-top: 12px;">
                <strong>Use cases Nelson described:</strong>
                <ul style="margin: 8px 0 0 20px; font-size: 13px;">
                    <li><strong>Translations:</strong> Compare source and target language side-by-side</li>
                    <li><strong>Legal codes:</strong> Compare laws across jurisdictions (e.g., California vs. New York)</li>
                    <li><strong>Variorum editions:</strong> Compare different versions of Shakespeare with linked equivalent scenes</li>
                    <li><strong>Product manuals:</strong> Parallel manuals for different models with aligned sections</li>
                </ul>
                <br>
                <strong>Modern implementations:</strong> Bible study software (parallel translations), CAT tools for translators, some legal research platforms.
            </div>
        </div>

        <div class="demo-section" style="background: rgba(139, 0, 0, 0.03); border-color: var(--chinese-red);">
            <h2>🎯 Why These Features Matter</h2>

            <div class="comparison" style="margin-top: 12px;">
                <div class="comparison-item">
                    <h4 style="margin-bottom: 8px;">Without These Features (Current Web)</h4>
                    <ul style="margin: 8px 0 0 20px; font-size: 13px; line-height: 1.6;">
                        <li>Links break when pages move</li>
                        <li>No way to know who's linking to you</li>
                        <li>Copy-pasted info becomes stale/wrong</li>
                        <li>Hard to track how documents evolved</li>
                        <li>Comparing versions is manual/tedious</li>
                    </ul>
                </div>
                <div class="comparison-item">
                    <h4 style="margin-bottom: 8px;">With Nelson's Features</h4>
                    <ul style="margin: 8px 0 0 20px; font-size: 13px; line-height: 1.6;">
                        <li>Bidirectional links = automatic context</li>
                        <li>Transclusion = always up-to-date</li>
                        <li>Version linking = track idea evolution</li>
                        <li>Parallel docs = easy comparison</li>
                        <li>Everything connected = better understanding</li>
                    </ul>
                </div>
            </div>

            <div class="explanation" style="margin-top: 12px; background: rgba(255, 215, 0, 0.15);">
                <strong>For your Nabokov project:</strong> You could implement:
                <ul style="margin: 8px 0 0 20px; font-size: 13px; line-height: 1.6;">
                    <li><strong>Bidirectional links:</strong> When card A references URL X, show "Referenced by Card A" on all other cards with URL X</li>
                    <li><strong>Version tracking:</strong> Track edits to cards and show evolution timeline</li>
                    <li><strong>Transclusion:</strong> Create "reference cards" that pull live content from other cards</li>
                    <li><strong>Parallel view:</strong> Show different captures from the same website side-by-side with synchronized scrolling</li>
                </ul>
            </div>
        </div>

        <div style="margin-top: 20px; padding: 12px; background: rgba(139, 0, 0, 0.03); border-top: 2px solid var(--chinese-red); font-size: 12px; color: #666;">
            <strong>Source:</strong> Nelson, T. H. (1965). "A File Structure for The Complex, The Changing and the Indeterminate."
            <br>
            <strong>Interactive demos created:</strong> 2025-10-01
        </div>
    </div>

    <script>
        // Demo 1: Bidirectional Links
        function initBidirectionalLinks() {
            const docs = document.querySelectorAll('.document-box');
            const links = document.querySelectorAll('.link-out');

            // Build backlinks
            const backlinksMap = {};
            links.forEach(link => {
                const target = link.getAttribute('data-target');
                const sourceDoc = link.closest('.document-box').getAttribute('data-doc');

                if (!backlinksMap[target]) {
                    backlinksMap[target] = [];
                }
                backlinksMap[target].push(sourceDoc);
            });

            // Display backlinks
            docs.forEach(doc => {
                const docId = doc.getAttribute('data-doc');
                const backlinksList = doc.querySelector('.backlinks-list');

                if (backlinksMap[docId] && backlinksMap[docId].length > 0) {
                    backlinksMap[docId].forEach(sourceId => {
                        const sourceDoc = document.querySelector(`[data-doc="${sourceId}"]`);
                        const sourceTitle = sourceDoc.querySelector('.document-title').textContent;

                        const backlink = document.createElement('span');
                        backlink.className = 'backlink-item';
                        backlink.textContent = sourceTitle;
                        backlink.onclick = () => {
                            sourceDoc.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            sourceDoc.classList.add('highlight');
                            setTimeout(() => sourceDoc.classList.remove('highlight'), 2000);
                        };
                        backlinksList.appendChild(backlink);
                    });
                } else {
                    backlinksList.innerHTML = '<span style="color: #999; font-size: 11px;">None</span>';
                }
            });

            // Link click behavior
            links.forEach(link => {
                link.onclick = () => {
                    const target = link.getAttribute('data-target');
                    const targetDoc = document.querySelector(`[data-doc="${target}"]`);

                    docs.forEach(d => d.classList.remove('highlight'));
                    targetDoc.classList.add('highlight');
                    targetDoc.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    setTimeout(() => targetDoc.classList.remove('highlight'), 3000);
                };
            });
        }

        // Demo 2: Version Comparison
        function initVersionComparison() {
            const paragraphs = document.querySelectorAll('.paragraph.linked');

            paragraphs.forEach(para => {
                para.onmouseenter = () => {
                    const linkId = para.getAttribute('data-link');
                    const allLinked = document.querySelectorAll(`[data-link="${linkId}"]`);
                    allLinked.forEach(p => p.classList.add('highlighted'));
                };

                para.onmouseleave = () => {
                    document.querySelectorAll('.paragraph').forEach(p => p.classList.remove('highlighted'));
                };
            });
        }

        // Demo 3: Transclusion
        function updateTransclusion() {
            const sourceText = document.getElementById('source-text').textContent;
            document.getElementById('transcluded-text-1').textContent = sourceText;
            document.getElementById('transcluded-text-2').textContent = sourceText;

            // Visual feedback
            const transcluded = document.querySelectorAll('.transcluded-content');
            transcluded.forEach(t => {
                t.style.background = 'rgba(76, 175, 80, 0.3)';
                setTimeout(() => {
                    t.style.background = 'rgba(255, 215, 0, 0.2)';
                }, 500);
            });
        }

        // Auto-update on typing (debounced)
        let typingTimer;
        document.getElementById('source-text').addEventListener('input', () => {
            clearTimeout(typingTimer);
            typingTimer = setTimeout(updateTransclusion, 500);
        });

        // Demo 4: Parallel Documents
        function initParallelDocs() {
            const sections = document.querySelectorAll('.aligned-section');

            sections.forEach(section => {
                section.onclick = () => {
                    const alignId = section.getAttribute('data-align');
                    const allAligned = document.querySelectorAll(`[data-align="${alignId}"]`);

                    // Remove previous highlights
                    document.querySelectorAll('.aligned-section').forEach(s => s.classList.remove('active'));

                    // Highlight aligned sections
                    allAligned.forEach(s => s.classList.add('active'));

                    // Scroll both into view
                    allAligned[0].scrollIntoView({ behavior: 'smooth', block: 'center' });
                };
            });
        }

        // Initialize all demos
        document.addEventListener('DOMContentLoaded', () => {
            initBidirectionalLinks();
            initVersionComparison();
            initParallelDocs();
        });
    </script>
</body>
</html>